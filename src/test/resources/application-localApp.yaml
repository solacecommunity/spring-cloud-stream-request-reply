spring:
  cloud:
    function:
      definition: logger;reverse
    stream:
      defaultBinder: main_session
      default:
        consumer.autoStartup: true
        producer.autoStartup: true
        group:  springboot-starter-request-reply
        consumer:
          concurrency: 2

      requestreply:
        binderName: ${spring.cloud.stream.defaultBinder}

      bindings:
        reverse-in-0:
          destination: requestReverse
        reverse-out-0:
          destination: replyReverse
        logger-in-0:
          destination: logging
          contentType: "text/plain"

      binders:
        main_session:
          type: solace
          environment:
            solace:
              java:
                host: ${SOLACE_HOSTS}
                msgVpn: ${SOLACE_MSG_VPN}
                clientUsername: ${SOLACE_USERNAME}
                clientPassword: ${SOLACE_PASSWORD}
                clientName: ${HOSTNAME}_${random.uuid}
                connectRetries: 5
                reconnectRetries: 3
                connectRetriesPerHost: 2
                reconnectRetryWaitInMillis: 3000
                apiProperties:
                  SUB_ACK_WINDOW_SIZE: 255
                  PUB_ACK_WINDOW_SIZE: 255

      solace:
        bindings:
          logger-in-0:
            consumer:
              provisionDurableQueue: true
              queueRespectsMsgTtl: true

logging:
  level:
    ch.sbb.tms.capaopt.springbootstarter.requestreply: DEBUG
